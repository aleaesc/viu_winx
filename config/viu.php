<?php

return [
    // Multilingual structured knowledge base: each item has id, keywords, English & Tagalog answers.
    'kb' => [
        [
            'id' => 'free-tier',
            'keywords' => ['free','ads','tier','basic'],
            'en' => 'Free tier: ads, standard definition or limited HD, some episodes may arrive later.',
            'tl' => 'Free tier: may ads, standard definition o limitado ang HD, may episodes na mas late darating.'
        ],
        [
            'id' => 'premium-tier',
            'keywords' => ['premium','benefits','perk','advantage','upgrade'],
            'en' => 'Premium: no ads, HD up to 1080p (select 4K), offline downloads, faster episode access.',
            'tl' => 'Premium: walang ads, HD hanggang 1080p (minsan 4K), offline downloads, mas mabilis na access sa episodes.'
        ],
        [
            'id' => 'pricing',
            'keywords' => ['price','pricing','cost','magkano','presyo','subscription'],
            'en' => 'Sample PH price: about PHP149/month (subject to change). Prices vary by region.',
            'tl' => 'Halimbawa presyo sa PH: mga PHP149/buwan (pwedeng magbago). Nag-iiba ang presyo bawat bansa.'
        ],
        [
            'id' => 'subtitles',
            'keywords' => ['subtitle','language','caption','tagalog','english','arabic','indonesian','thai'],
            'en' => 'Subtitle languages vary by region: English, Tagalog (PH), Indonesian, Thai, Arabic (MENA), Chinese for select shows.',
            'tl' => 'Nag-iiba ang subtitle languages kada region: English, Tagalog (PH), Indonesian, Thai, Arabic (MENA), Chinese sa piling shows.'
        ],
        [
            'id' => 'downloads',
            'keywords' => ['download','offline','save','dl'],
            'en' => 'Offline downloads: Premium only; tap the download icon on supported episodes in mobile app.',
            'tl' => 'Offline downloads: Premium lang; i-tap ang download icon sa supported episodes sa mobile app.'
        ],
        [
            'id' => 'countries',
            'keywords' => ['country','countries','available','region','where','bansa','availability'],
            'en' => 'Representative markets: HK, SG, MY, ID, TH, PH, Myanmar + Middle East (UAE, Saudi, Kuwait, Qatar, Bahrain, Oman, Jordan, Egypt).',
            'tl' => 'Mga market: HK, SG, MY, ID, TH, PH, Myanmar + Middle East (UAE, Saudi, Kuwait, Qatar, Bahrain, Oman, Jordan, Egypt).'
        ],
        [
            'id' => 'genres',
            'keywords' => ['genre','genres','kdrama','k-drama','anime','variety','originals','content','palabas'],
            'en' => 'Core genres: K-drama, C-drama, Thai series, Anime, Variety shows, Viu Originals.',
            'tl' => 'Pangunahing genres: K-drama, C-drama, Thai series, Anime, Variety shows, Viu Originals.'
        ],
        [
            'id' => 'popular-shows',
            'keywords' => ['popular','trending','recommend','suggest','best'],
            'en' => 'Popular examples: True Beauty, Vincenzo, Hometown Cha-Cha-Cha, Running Man, selected Viu Originals.',
            'tl' => 'Halimbawa trending: True Beauty, Vincenzo, Hometown Cha-Cha-Cha, Running Man, ilang Viu Originals.'
        ],
        [
            'id' => 'buffering',
            'keywords' => ['buffer','buffering','lag','slow','quality','bitrate'],
            'en' => 'If buffering: check internet speed, restart app, clear cache, lower quality setting.',
            'tl' => 'Kung nagba-buffer: i-check internet speed, restart app, clear cache, babaan ang quality setting.'
        ],
        [
            'id' => 'quality',
            'keywords' => ['quality','hd','4k','resolution'],
            'en' => 'Video quality: up to 1080p HD (select 4K) for Premium; adaptive streaming adjusts automatically.',
            'tl' => 'Video quality: hanggang 1080p HD (minsan 4K) sa Premium; adaptive streaming ang awtomatikong nag-aadjust.'
        ],
        [
            'id' => 'account-support',
            'keywords' => ['support','help','account','billing'],
            'en' => 'Account & billing help: use official Viu support channels in app or website help center.',
            'tl' => 'Para sa account at billing: gamitin ang opisyal na Viu support channels sa app o website help center.'
        ],
        [
            'id' => 'recommendations',
            'keywords' => ['recommend','personalize','algorithm','suggestion'],
            'en' => 'Recommendations improve as you watch and finish episodes; try a few different genres.',
            'tl' => 'Gumaganda ang recommendations habang nanonood ka at tinatapos ang episodes; subukan iba-ibang genre.'
        ],
        [
            'id' => 'survey-scale',
            'keywords' => ['rating','scale','survey','1','5','satisfaction'],
            'en' => 'Survey rating scale: 1 Very Dissatisfied … 5 Very Satisfied. Use 3 for neutral experience.',
            'tl' => 'Survey rating scale: 1 Lubos na Hindi Nasiyahan … 5 Lubos na Nasiyahan. Gamitin ang 3 para neutral na karanasan.'
        ],
        [
            'id' => 'survey-purpose',
            'keywords' => ['what is this','whats this','purpose','para san','about','ano ito','ano to','website','site','survey info'],
            'en' => 'This website hosts the Viu User Experience & Satisfaction Survey. It collects your viewing feedback to improve content, speed, subtitles, recommendations, downloads, support, and overall value.',
            'tl' => 'Ang website na ito ay para sa Viu User Experience & Satisfaction Survey. Kinokolekta nito ang feedback mo para ma-improve ang content, bilis, subtitles, recommendations, downloads, support, at overall value.'
        ],
        [
            'id' => 'survey-howto',
            'keywords' => ['how to do survey','how to start','start survey','paano magsimula','pano','steps','gabay'],
            'en' => "How to do the survey:\n- Click 'Start Survey'\n- Choose your country\n- Accept privacy notice\n- Pick favorite genres\n- Rate 10 topics from 1 to 5\nTip: Takes about 3–5 minutes.",
            'tl' => "Paano gawin ang survey:\n- I-click ang 'Start Survey'\n- Piliin ang bansa\n- Tanggapin ang privacy notice\n- Pumili ng paboritong genres\n- I-rate ang 10 topics mula 1 hanggang 5\nTip: Mga 3–5 minuto lang."
        ],
        [
            'id' => 'privacy',
            'keywords' => ['privacy','data','personal','info'],
            'en' => 'Survey feedback is anonymous; optional fields can be skipped if you prefer.',
            'tl' => 'Anonymous ang survey feedback; optional fields pwedeng laktawan kung gusto mo.'
        ],
        [
            'id' => 'upgrade',
            'keywords' => ['upgrade','how to upgrade'],
            'en' => 'Upgrade: open Premium page in app, choose plan, confirm payment method.',
            'tl' => 'Pag-upgrade: buksan Premium page sa app, pumili ng plan, i-confirm ang payment method.'
        ],
        [
            'id' => 'episodes-count',
            'keywords' => ['how many episode','episode count','episodes','ilang episodes'],
            'en' => 'Episode counts vary by show: many K-dramas 16 episodes; variety shows ongoing; anime seasonal. Check show page for exact number.',
            'tl' => 'Nag-iiba ang bilang ng episodes kada palabas: maraming K-drama 16 episodes; variety shows tuloy-tuloy; anime seasonal. Tingnan ang show page para sa eksaktong bilang.'
        ],
        [
            'id' => 'release-speed',
            'keywords' => ['release speed','how fast','episode release','bilis','mabilis'],
            'en' => 'New episodes often appear within hours or next day depending on licensing. Premium may see faster access where applicable.',
            'tl' => 'Kadalasang lumalabas ang bagong episodes sa loob ng ilang oras o kinabukasan depende sa licensing. Mas mabilis minsan ang access sa Premium.'
        ],
        [
            'id' => 'personalization',
            'keywords' => ['personalization','algorithm','recommendation algorithm','how recommendations work'],
            'en' => 'Recommendations use watch history, completion, pause patterns, and genre diversity. Explore different genres to refine suggestions.',
            'tl' => 'Gumagamit ang recommendations ng watch history, completion, pause patterns, at genre diversity. Mag-explore ng iba pang genre para gumanda ang suggestions.'
        ],
        [
            'id' => 'search-tips',
            'keywords' => ['search tips','how to search','find show','hanapin'],
            'en' => 'Search tips: use exact title words, try language variants, filter by genre or newest, and avoid extra punctuation.',
            'tl' => 'Search tips: gumamit ng eksaktong titulo, subukan language variant, i-filter sa genre o pinakabago, iwasan sobrang punctuation.'
        ],
        [
            'id' => 'device-support',
            'keywords' => ['device','supported devices','platform','smart tv','android','ios'],
            'en' => 'Supported devices: web browser, Android/iOS apps, select Smart TVs & casting (Chromecast/AirPlay).',
            'tl' => 'Supported devices: web browser, Android/iOS apps, piling Smart TV at casting (Chromecast/AirPlay).'
        ],
        [
            'id' => 'payment-methods',
            'keywords' => ['payment','methods','pay','billing','cards','gcash'],
            'en' => 'Payment methods vary by region: common options include credit/debit cards, mobile wallets, in-app purchases. Check local app store list.',
            'tl' => 'Nag-iiba ang payment methods kada bansa: kadalasan credit/debit cards, mobile wallets, in-app purchases. Tingnan ang local app store list.'
        ],
        [
            'id' => 'account-security',
            'keywords' => ['security','account security','secure','proteksyon','password'],
            'en' => 'Account security: use a strong unique password, enable device lock, avoid sharing login, sign out on shared devices.',
            'tl' => 'Account security: gumamit ng malakas na unique password, i-enable device lock, iwasang ibahagi ang login, mag-sign out sa shared devices.'
        ],
        [
            'id' => 'subtitle-issues',
            'keywords' => ['subtitle issue','missing subtitle','walang subtitle','delay subtitle'],
            'en' => 'Subtitle issues: try refreshing, check language menu, some episodes add subtitles later due to timing.',
            'tl' => 'Problema sa subtitles: i-refresh, tingnan ang language menu, may episodes na dinadagdag ang subtitles nang mas huli.'
        ],
        [
            'id' => 'buffering-advanced',
            'keywords' => ['advanced buffering','buffer fixes','bitrate','adaptive streaming'],
            'en' => 'Advanced buffering fixes: switch Wi‑Fi channel, close background bandwidth-heavy apps, toggle quality to reset adaptive streaming.',
            'tl' => 'Advanced buffering fixes: palitan ang Wi‑Fi channel, isara apps na malakas sa bandwidth, i-toggle ang quality para mag-reset ang adaptive streaming.'
        ],
        [
            'id' => 'download-limitations',
            'keywords' => ['download limit','download expiration','expiry','expire'],
            'en' => 'Downloads may expire after a set period or require periodic app online checks. Re-download if access lapses.',
            'tl' => 'Pwedeng mag-expire ang downloads matapos ang takdang panahon o kailangan ng periodic online check. I-re-download kung nawala ang access.'
        ],
        [
            'id' => 'value-tips',
            'keywords' => ['maximize value','save','tip','best use','sulit'],
            'en' => 'Value tips: batch download before trips, explore Originals for exclusive content, use search filters to find fresh shows.',
            'tl' => 'Value tips: mag-download bago bumiyahe, i-explore ang Originals para sa exclusive content, gamitin ang search filters para sa bagong palabas.'
        ],
    ],
    'chatbot' => [
        // Legacy single provider fields (Gemini) retained for backward compatibility
        'provider' => env('VIU_CHATBOT_PROVIDER', 'google'),
        'api_key' => env('VIU_CHATBOT_API_KEY'),
        'model' => env('VIU_CHATBOT_MODEL', 'gemini-1.5-flash'),
        'endpoint' => env('VIU_CHATBOT_ENDPOINT', 'https://generativelanguage.googleapis.com/v1beta/models'),
        // New multi-provider cascade (first available key wins)
        'providers' => [
            [
                'name' => 'openai',
                'key' => env('OPENAI_API_KEY'),
                'model' => env('OPENAI_MODEL', 'gpt-4o-mini'),
                'endpoint' => env('OPENAI_BASE_URL', 'https://api.openai.com/v1/chat/completions'),
                'type' => 'openai'
            ],
            [
                'name' => 'gemini',
                'key' => env('GEMINI_API_KEY'),
                'model' => env('GEMINI_MODEL', 'gemini-1.5-flash'),
                'endpoint' => env('GEMINI_BASE_URL', 'https://generativelanguage.googleapis.com/v1beta/models'),
                'type' => 'gemini'
            ],
            [
                'name' => 'openrouter',
                'key' => env('OPENROUTER_API_KEY'),
                'model' => env('OPENROUTER_MODEL', 'gpt-4o-mini'),
                'endpoint' => env('OPENROUTER_BASE_URL', 'https://openrouter.ai/api/v1/chat/completions'),
                'type' => 'openai'
            ],
        ],
        // Fallback variants (cycled to reduce repetition)
        'fallback_variants_en' => [
            'Ask me about Premium, subtitles, downloads, pricing, countries, buffering.',
            'Need ideas? Try: recommendations, upgrade steps, subtitle languages, offline downloads.',
            'Curious about shows? Ask for popular K-drama or variety recommendations.'
        ],
        'fallback_variants_tl' => [
            'Tanong tungkol sa Premium, subtitles, downloads, pricing, countries, buffering.',
            'Need idea? Subukan: recommendations, upgrade steps, subtitle languages, offline downloads.',
            'Gusto mo ng palabas? Humingi ng popular K-drama o variety recommendations.'
        ],
        // Synonyms & normalization map
        'normalize' => [
            'reco' => 'recommend',
            'whast' => 'what',
            'kdramas' => 'kdrama',
            'subs' => 'subtitle',
            'lang' => 'language',
            'ep' => 'episode',
            'episodes' => 'episode',
            'mag kano' => 'magkano',
            'pano' => 'paano',
            'ano to' => 'ano ito'
        ],
        // Intent keyword hints
        'intents' => [
            'greeting' => ['hi','hello','hey','kamusta','kumusta','musta'],
            'meta' => ['what is this','whats this','who are you','ano ito','ano to','purpose','para san','website','site','survey'],
            'pricing' => ['price','pricing','cost','magkano','presyo'],
            'premium' => ['premium','upgrade','benefits','perk','advantage'],
            'recommend' => ['recommend','reco','suggest','popular','trending','best'],
            'troubleshoot' => ['buffer','buffering','lag','slow','error','crash'],
            'download' => ['download','offline','dl','expire','expiration'],
            'subtitle' => ['subtitle','subtitles','caption','language','tagalog','english','missing'],
            'creative' => ['if this website is a kdrama','if this app is a kdrama','if viu is a kdrama'],
            'search' => ['search','find','hanapin'],
            'device' => ['device','smart tv','android','ios','platform'],
            'payment' => ['payment','billing','pay','cards','wallet'],
            'security' => ['security','secure','proteksyon','password']
        ],
        // Moderation patterns (case-insensitive regex fragments)
        'moderation' => [
            'suicide','self-harm','kill myself','terrorism','extremist','bomb','pirate','torrent','illegal stream','hate','racist','sex trafficking','child abuse','underage','exploit','credit card','password','api key'
        ],
        'moderation_refusal_en' => 'I cannot help with that topic. Please ask about the survey, Viu features, content, pricing, or technical issues instead.',
        'moderation_refusal_tl' => 'Hindi ako makakatulong sa topic na iyon. Pwede mong itanong ang tungkol sa survey, features ng Viu, content, pricing, o technical issues.',
        // Canonical system prompt injected before user question when external provider used.
        'system_prompt' => <<<'PROMPT'
You are ViuBot — a warm, energetic assistant for the Viu User Experience & Satisfaction Survey.
Tone: friendly, practical, encouraging, slightly playful but never flippant.
Audience: mixed ages; keep sentences short and clear.
Language: default English; switch to Tagalog if message is mainly Tagalog tokens.
Length: under 120 words. Plain text only, no markdown.
Structure: quick answer (1–2 lines) + short bullet steps + closing tip when helpful.
Website purpose: this site hosts the Viu User Experience & Satisfaction Survey to improve content library, streaming speed, subtitles, recommendations, downloads, support, and overall value.
If intent is meta (user asks what site is / purpose) ALWAYS include survey purpose AND step-by-step how to start.
If query is very short (e.g. 'pano', 'para san') infer from recent topic/context.
For troubleshooting include one empathy phrase first if negative terms appear.
For recommendations supply 3 examples (mix genre) unless user asks for fewer.
For download expiration mention re-download after lapse when relevant.
How to do the survey: Start Survey → pick country → accept privacy → choose genres → rate 10 topics (1–5). ~3–5 minutes.
Rating scale: 1 Very Dissatisfied … 5 Very Satisfied.
Trusted Viu facts (quote exactly if relevant):
Free tier: ads, standard definition or limited HD, some episodes may arrive later.
Premium: no ads, HD up to 1080p (select 4K), offline downloads, faster episode access.
Subtitle languages vary by region: English, Tagalog (PH), Indonesian, Thai, Arabic (MENA), Chinese for select shows.
Popular examples: True Beauty, Vincenzo, Hometown Cha-Cha-Cha, Running Man, selected Viu Originals.
Core genres: K-drama, C-drama, Thai series, Anime, Variety shows, Viu Originals.
Representative markets: HK, SG, MY, ID, TH, PH, Myanmar + Middle East (UAE, Saudi, Kuwait, Qatar, Bahrain, Oman, Jordan, Egypt).
Sample PH price: about PHP149/month (subject to change). Prices vary by region.
Unknown info (e.g. a future promo): say you are not sure and suggest checking official Viu app or site.
Safety: do not give medical, legal, or financial advice.
Benefits answers: list clearly and suggest trying free tier first.
If user mood is negative ("buffering", "slow"): add a short empathy line and one fix tip.
Never invent unsupported facts. If unsure, say you do not have that info.
PROMPT
    ],
];
